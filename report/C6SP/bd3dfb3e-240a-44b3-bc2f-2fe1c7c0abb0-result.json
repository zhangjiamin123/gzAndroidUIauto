{"name": "C6SP基站绑定解绑", "status": "broken", "statusDetails": {"message": "TypeError: not all arguments converted during string formatting", "trace": "self = <test_gzAndroidAuto.TestAddDevices object at 0x0000020E43A05100>\nssid = '11111111-5g', pwd = '12345678', home_base_sn = 'H1L2AH110000650'\n\n    @allure.title('C6SP基站绑定解绑')\n    @allure.story('C6SP基站绑定后涂鸦状态和aosu状态不一致，涂鸦状态是离线，aosu状态是在线，等待一段时间后状态仍然不同步')\n    def test_addC6SP_station(self, ssid='11111111-5g', pwd='12345678', home_base_sn='H1L2AH110000650'):\n        with allure.step('step1：点击右上角的+号，开始执行时间为：%s' % time.strftime(\"%Y-%m-%d %H:%M:%S\", time.localtime())):\n            master.find_element_by_id('com.glazero.android:id/img_add_device').click()\n            master.implicitly_wait(10)\n    \n        with allure.step('step2：选择c6sp套装'):\n            master.find_element_by_xpath('//android.widget.TextView[@text=\"Max/Pro\\nSystem\"]').click()\n            master.implicitly_wait(10)\n    \n        with allure.step('step3：弹出照相机权限后点击cancel'):\n            master.find_element_by_id('com.glazero.android:id/btn_dialog_cancel').click()\n            master.implicitly_wait(10)\n    \n        with allure.step('step4：点击Use other methods'):\n            master.find_element_by_id('com.glazero.android:id/tv_other_way').click()\n            master.implicitly_wait(10)\n    \n        with allure.step('step5：点击continue'):\n            master.find_element_by_id('com.glazero.android:id/button').click()\n            master.implicitly_wait(10)\n    \n        with allure.step('step6：继续点击continue'):\n            master.find_element_by_id('com.glazero.android:id/button').click()\n            master.implicitly_wait(10)\n    \n        with allure.step('step7：继续点击continue'):\n            master.find_element_by_xpath('//android.widget.Button[@text=\"CONTINUE\"]').click()\n            master.implicitly_wait(10)\n    \n        with allure.step('step8：等待基站SN出现后，选择基站的SN'):\n            try:\n                WebDriverWait(master, timeout=30, poll_frequency=2).until(\n                    lambda x: x.find_element_by_xpath('//android.widget.TextView[@text=\"%s\"]' % home_base_sn))\n            except NoSuchElementException:\n                logging.error('没有找到要绑定的基站sn: %s' % home_base_sn)\n                ts_fail = time.strftime(\"%Y-%m-%d_%H-%M-%S\", time.localtime())\n                master.save_screenshot('./report/C6SP/fail_%s.png' % ts_fail)\n                time.sleep(3)\n                allure.attach.file(\"./report/C6SP/fail_%s.png\" % ts_fail, name=\"fail\",\n                                   attachment_type=allure.attachment_type.JPG)\n                master.implicitly_wait(10)\n            else:\n                logging.info('找到了要绑定的基站sn: %s' % home_base_sn)\n                ts_success = time.strftime(\"%Y-%m-%d_%H-%M-%S\", time.localtime())\n                master.save_screenshot('./report/C6SP/success_%s.png' % ts_success)\n                time.sleep(3)\n                allure.attach.file(\"./report/C6SP/success_%s.png\" % ts_success, name=\"success\",\n                                   attachment_type=allure.attachment_type.JPG)\n                master.implicitly_wait(10)\n    \n                # 出现后点击SN\n                master.find_element_by_xpath('//android.widget.TextView[@text=\"%s\"]' % home_base_sn).click()\n                master.implicitly_wait(10)\n    \n        with allure.step('step9：跳转到Name Your HomeBase页面后，点击continue'):\n            try:\n                WebDriverWait(master, timeout=30, poll_frequency=2).until(\n                    lambda x: x.find_element_by_id('com.glazero.android:id/subtitle'))\n    \n            except NoSuchElementException:\n                logging.error('没有找到Name Your HomeBase这个元素')\n                ts_fail = time.strftime(\"%Y-%m-%d_%H-%M-%S\", time.localtime())\n                master.save_screenshot('./report/C6SP/fail_%s.png' % ts_fail)\n                time.sleep(3)\n                allure.attach.file(\"./report/C6SP/fail_%s.png\" % ts_fail, name=\"fail\",\n                                   attachment_type=allure.attachment_type.JPG)\n                master.implicitly_wait(10)\n    \n                # 虽然绑定失败了，解绑一下，为下一次绑定做好准备，以免提示已绑定\n                gz_public._unbind(home_base_sn, 1, 1)\n                time.sleep(3)\n            else:\n                logging.info('已经跳转到了Name Your HomeBase')\n                master.find_element_by_xpath('//android.widget.Button[@text=\"CONTINUE\"]').click()\n                master.implicitly_wait(10)\n    \n        with allure.step('step10：跳转到绑定成功页面，超时时间是5分钟，每2秒检查一次页面，结束时间为：%s' % time.strftime(\"%Y-%m-%d %H:%M:%S\", time.localtime())):\n            try:\n                WebDriverWait(master, timeout=300, poll_frequency=2).until(\n                    lambda x: x.find_element_by_id('com.glazero.android:id/subtitle'))\n            except NoSuchElementException:\n                logging.error('绑定失败')\n                ts_fail = time.strftime(\"%Y-%m-%d_%H-%M-%S\", time.localtime())\n                master.save_screenshot('./report/C6SP/fail_%s.png' % ts_fail)\n                time.sleep(3)\n                allure.attach.file(\"./report/C6SP/fail_%s.png\" % ts_fail, name=\"fail\",\n                                   attachment_type=allure.attachment_type.JPG)\n                master.implicitly_wait(10)\n    \n                # 虽然绑定失败了，解绑一下，为下一次绑定做好准备，以免提示已绑定\n                gz_public._unbind(home_base_sn, 1, 1)\n                time.sleep(3)\n            else:\n                logging.info('绑定成功')\n                ts_success = time.strftime(\"%Y-%m-%d_%H-%M-%S\", time.localtime())\n                master.save_screenshot('./report/C6SP/success_%s.png' % ts_success)\n                time.sleep(3)\n                allure.attach.file(\"./report/C6SP/success_%s.png\" % ts_success, name=\"success\",\n                                   attachment_type=allure.attachment_type.JPG)\n                master.implicitly_wait(10)\n    \n                # 点击右上角的关闭X按钮，回到首页\n                master.find_element_by_id('com.glazero.android:id/img_title_close').click()\n                master.implicitly_wait(10)\n                gz_public.swipe_down(driver=master)\n                time.sleep(3)\n    \n                ts_success = time.strftime(\"%Y-%m-%d_%H-%M-%S\", time.localtime())\n                master.save_screenshot('./report/C6SP/success_%s.png' % ts_success)\n                time.sleep(3)\n                allure.attach.file(\"./report/C6SP/success_%s.png\" % ts_success, name=\"success\",\n                                   attachment_type=allure.attachment_type.JPG)\n                master.implicitly_wait(10)\n    \n                # 等待1分钟后再查询涂鸦状态，保证有充分的时间设备在涂鸦端上线\n                time.sleep(60)\n    \n                # 绑定成功后，检查设备的涂鸦状态是否为在线，如果涂鸦端不在线，问题复现，退出pytest\n                rsp = gz_public.aosu_admin_get_dev_info(home_base_sn)\n>               logging.info(\"aosu状态为：\", rsp.json()['data']['list'][0]['online'])\n\ntest_gzAndroidAuto.py:683: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n..\\..\\AppData\\Local\\Programs\\Python\\Python39\\lib\\logging\\__init__.py:2097: in info\n    root.info(msg, *args, **kwargs)\n..\\..\\AppData\\Local\\Programs\\Python\\Python39\\lib\\logging\\__init__.py:1446: in info\n    self._log(INFO, msg, args, **kwargs)\n..\\..\\AppData\\Local\\Programs\\Python\\Python39\\lib\\logging\\__init__.py:1589: in _log\n    self.handle(record)\n..\\..\\AppData\\Local\\Programs\\Python\\Python39\\lib\\logging\\__init__.py:1599: in handle\n    self.callHandlers(record)\n..\\..\\AppData\\Local\\Programs\\Python\\Python39\\lib\\logging\\__init__.py:1661: in callHandlers\n    hdlr.handle(record)\n..\\..\\AppData\\Local\\Programs\\Python\\Python39\\lib\\logging\\__init__.py:952: in handle\n    self.emit(record)\nvenv\\Lib\\site-packages\\_pytest\\logging.py:331: in emit\n    super().emit(record)\n..\\..\\AppData\\Local\\Programs\\Python\\Python39\\lib\\logging\\__init__.py:1091: in emit\n    self.handleError(record)\n..\\..\\AppData\\Local\\Programs\\Python\\Python39\\lib\\logging\\__init__.py:1083: in emit\n    msg = self.format(record)\n..\\..\\AppData\\Local\\Programs\\Python\\Python39\\lib\\logging\\__init__.py:927: in format\n    return fmt.format(record)\nvenv\\Lib\\site-packages\\_pytest\\logging.py:92: in format\n    return super().format(record)\n..\\..\\AppData\\Local\\Programs\\Python\\Python39\\lib\\logging\\__init__.py:663: in format\n    record.message = record.getMessage()\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n\nself = <LogRecord: root, 20, C:\\Users\\Hello\\PycharmProjects\\gz_ui_auto\\test_gzAndroidAuto.py, 683, \"aosu状态为：\">\n\n    def getMessage(self):\n        \"\"\"\n        Return the message for this LogRecord.\n    \n        Return the message for this LogRecord after merging any user-supplied\n        arguments with the message.\n        \"\"\"\n        msg = str(self.msg)\n        if self.args:\n>           msg = msg % self.args\nE           TypeError: not all arguments converted during string formatting\n\n..\\..\\AppData\\Local\\Programs\\Python\\Python39\\lib\\logging\\__init__.py:367: TypeError"}, "steps": [{"name": "step1：点击右上角的+号，开始执行时间为：2022-06-24 17:53:46", "status": "passed", "start": 1656064426525, "stop": 1656064426719}, {"name": "step2：选择c6sp套装", "status": "passed", "start": 1656064426719, "stop": 1656064427720}, {"name": "step3：弹出照相机权限后点击cancel", "status": "passed", "start": 1656064427720, "stop": 1656064428788}, {"name": "step4：点击Use other methods", "status": "passed", "start": 1656064428789, "stop": 1656064429412}, {"name": "step5：点击continue", "status": "passed", "start": 1656064429413, "stop": 1656064430186}, {"name": "step6：继续点击continue", "status": "passed", "start": 1656064430186, "stop": 1656064430909}, {"name": "step7：继续点击continue", "status": "passed", "start": 1656064430909, "stop": 1656064431646}, {"name": "step8：等待基站SN出现后，选择基站的SN", "status": "passed", "attachments": [{"name": "success", "source": "3ef6df0e-02e3-440d-9f94-668fc0bcbcd3-attachment.jpg", "type": "image/jpg"}], "start": 1656064431646, "stop": 1656064440135}, {"name": "step9：跳转到Name Your HomeBase页面后，点击continue", "status": "passed", "start": 1656064440135, "stop": 1656064454373}, {"name": "step10：跳转到绑定成功页面，超时时间是5分钟，每2秒检查一次页面，结束时间为：2022-06-24 17:54:14", "status": "broken", "statusDetails": {"message": "TypeError: not all arguments converted during string formatting\n", "trace": "  File \"C:\\Users\\Hello\\PycharmProjects\\gz_ui_auto\\test_gzAndroidAuto.py\", line 683, in test_addC6SP_station\n    logging.info(\"aosu状态为：\", rsp.json()['data']['list'][0]['online'])\n  File \"C:\\Users\\Hello\\AppData\\Local\\Programs\\Python\\Python39\\lib\\logging\\__init__.py\", line 2097, in info\n    root.info(msg, *args, **kwargs)\n  File \"C:\\Users\\Hello\\AppData\\Local\\Programs\\Python\\Python39\\lib\\logging\\__init__.py\", line 1446, in info\n    self._log(INFO, msg, args, **kwargs)\n  File \"C:\\Users\\Hello\\AppData\\Local\\Programs\\Python\\Python39\\lib\\logging\\__init__.py\", line 1589, in _log\n    self.handle(record)\n  File \"C:\\Users\\Hello\\AppData\\Local\\Programs\\Python\\Python39\\lib\\logging\\__init__.py\", line 1599, in handle\n    self.callHandlers(record)\n  File \"C:\\Users\\Hello\\AppData\\Local\\Programs\\Python\\Python39\\lib\\logging\\__init__.py\", line 1661, in callHandlers\n    hdlr.handle(record)\n  File \"C:\\Users\\Hello\\AppData\\Local\\Programs\\Python\\Python39\\lib\\logging\\__init__.py\", line 952, in handle\n    self.emit(record)\n  File \"C:\\Users\\Hello\\PycharmProjects\\gz_ui_auto\\venv\\Lib\\site-packages\\_pytest\\logging.py\", line 331, in emit\n    super().emit(record)\n  File \"C:\\Users\\Hello\\AppData\\Local\\Programs\\Python\\Python39\\lib\\logging\\__init__.py\", line 1091, in emit\n    self.handleError(record)\n  File \"C:\\Users\\Hello\\AppData\\Local\\Programs\\Python\\Python39\\lib\\logging\\__init__.py\", line 1083, in emit\n    msg = self.format(record)\n  File \"C:\\Users\\Hello\\AppData\\Local\\Programs\\Python\\Python39\\lib\\logging\\__init__.py\", line 927, in format\n    return fmt.format(record)\n  File \"C:\\Users\\Hello\\PycharmProjects\\gz_ui_auto\\venv\\Lib\\site-packages\\_pytest\\logging.py\", line 92, in format\n    return super().format(record)\n  File \"C:\\Users\\Hello\\AppData\\Local\\Programs\\Python\\Python39\\lib\\logging\\__init__.py\", line 663, in format\n    record.message = record.getMessage()\n  File \"C:\\Users\\Hello\\AppData\\Local\\Programs\\Python\\Python39\\lib\\logging\\__init__.py\", line 367, in getMessage\n    msg = msg % self.args\n"}, "attachments": [{"name": "success", "source": "d4c6d125-5048-415e-b9df-81730aa27a39-attachment.jpg", "type": "image/jpg"}, {"name": "success", "source": "ae27af2e-318f-4b32-99af-186d722e63e0-attachment.jpg", "type": "image/jpg"}], "start": 1656064454373, "stop": 1656064528887}], "attachments": [{"name": "log", "source": "6176aa80-a10e-4eb2-8642-524040f577e5-attachment.txt", "type": "text/plain"}], "parameters": [{"name": "__pytest_repeat_step_number", "value": "0"}], "start": 1656064426524, "stop": 1656064528904, "uuid": "312b1830-bae1-420d-be2a-56756cf26fc1", "historyId": "93e61a4852edc99ac8d1a937c24a0d43", "testCaseId": "3088747e759b7cdb393e357e18b3ce2b", "fullName": "test_gzAndroidAuto.TestAddDevices#test_addC6SP_station", "labels": [{"name": "feature", "value": "添加设备-配网"}, {"name": "story", "value": "C6SP基站绑定后涂鸦状态和aosu状态不一致，涂鸦状态是离线，aosu状态是在线，等待一段时间后状态仍然不同步"}, {"name": "suite", "value": "test_gzAndroidAuto"}, {"name": "subSuite", "value": "TestAddDevices"}, {"name": "host", "value": "LAPTOP-V9T4AUSR"}, {"name": "thread", "value": "60356-MainThread"}, {"name": "framework", "value": "pytest"}, {"name": "language", "value": "cpython3"}, {"name": "package", "value": "test_gzAndroidAuto"}]}